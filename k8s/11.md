## Lab 11

### Part 1 - Secrets

- `kubectl create secret generic prod-credentials --from-literal=username=produser --from-literal=password=aladdinych`

![img_1.png](img-lab-11/img_1.png)

- `kubectl get secrets`

![img_2.png](img-lab-11/img_2.png)

- `kubectl get secret prod-credentials -o jsonpath='{.data}'`

![img_3.png](img-lab-11/img_3.png)

![img_4.png](img-lab-11/img_4.png)

![img_5.png](img-lab-11/img_5.png)

### Part 2 - Helm secrets

- `gpg --list-keys`

![img_6.png](img-lab-11/img_6.png)

- `gpg --gen-key`

![img_7.png](img-lab-11/img_7.png)

- `gpg --list-keys`

![img_8.png](img-lab-11/img_8.png)

- `sops -p 15586B5D60019C67D31AE332302F076B42820F34 secrets.yaml`

in the file: `password: secret123`

- `helm secrets view secrets.yaml`

![img_10.png](img-lab-11/img_10.png)

- `helm secrets upgrade --install time-app ./time-app -n default -f ./secrets.yaml`

![img_13.png](img-lab-11/img_13.png)

- `kubectl get pods`

![img_14.png](img-lab-11/img_14.png)

- `kubectl exec time-app-6fc69457fd-fkn59 -- printenv | grep MY_PASSWORD`

we get our secret back from inside the pod:

![img_15.png](img-lab-11/img_15.png)

### Part 3 - Resource management

set `values.yaml`

![img_16.png](img-lab-11/img_16.png)

upgrade helm

check that limits and requests on the pod correspond to the ones i set in the `values.yaml`

![img_17.png](img-lab-11/img_17.png)